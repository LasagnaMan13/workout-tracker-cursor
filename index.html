<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Track your workouts, generate WODs, and monitor your fitness progress">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Workout Tracker">
    <title>Workout Tracker</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" type="image/png" href="/icon.png">
    <link rel="apple-touch-icon" href="/icon.png">
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <img src="/icon.png" alt="Workout Tracker" class="logo-icon">
                    <h1>Workout Tracker</h1>
                </div>
                <div class="nav-links">
                    <button class="nav-btn" data-page="dashboard">Dashboard</button>
                    <button class="nav-btn" data-page="log">Log Workout</button>
                    <button class="nav-btn" data-page="wod">WOD Generator</button>
                    <button class="nav-btn" data-page="templates">Templates</button>
                    <button class="nav-btn" data-page="routines">Routines</button>
                    <button class="nav-btn" data-page="progress">Progress</button>
                    <button class="nav-btn" data-page="history">History</button>
                    <button id="auth-btn" class="auth-btn">Login</button>
                </div>
            </div>
        </nav>

        <!-- Auth Modal -->
        <div id="auth-modal" class="modal hidden">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="auth-container">
                    <h2>Login / Sign Up</h2>
                    <div id="auth-forms">
                        <!-- Login Form -->
                        <div id="login-form">
                            <input type="email" id="login-email" placeholder="Email" required>
                            <input type="password" id="login-password" placeholder="Password" required>
                            <button id="login-btn" class="btn btn-primary">Login</button>
                            <p>Don't have an account? <a href="#" id="show-signup">Sign up</a></p>
                        </div>
                        <!-- Signup Form -->
                        <div id="signup-form" class="hidden">
                            <input type="email" id="signup-email" placeholder="Email" required>
                            <input type="password" id="signup-password" placeholder="Password" required>
                            <button id="signup-btn" class="btn btn-primary">Sign Up</button>
                            <p>Already have an account? <a href="#" id="show-login">Login</a></p>
                        </div>
                    </div>
                    <div id="auth-error" class="error-message hidden"></div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                    <h2>Dashboard</h2>
                    <button id="export-data-btn-dashboard" class="btn btn-secondary">Export Data</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Workouts</h3>
                        <p class="stat-number" id="total-workouts">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>This Week</h3>
                        <p class="stat-number" id="week-workouts">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Volume (lbs)</h3>
                        <p class="stat-number" id="total-volume">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Favorite Exercise</h3>
                        <p class="stat-number" id="favorite-exercise">-</p>
                    </div>
                    <div class="stat-card">
                        <h3>This Month</h3>
                        <p class="stat-number" id="month-workouts">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Avg/Week</h3>
                        <p class="stat-number" id="avg-week-workouts">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Exercises</h3>
                        <p class="stat-number" id="total-exercises">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Consistency</h3>
                        <p class="stat-number" id="consistency-score">-</p>
                    </div>
                </div>
                <div class="dashboard-charts">
                    <div class="chart-card">
                        <h3>Workouts Per Month</h3>
                        <canvas id="monthly-chart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Volume Over Time</h3>
                        <canvas id="volume-chart"></canvas>
                    </div>
                </div>
                <div class="quick-actions">
                    <button class="btn btn-primary" data-page="wod">Generate WOD</button>
                    <button class="btn btn-secondary" data-page="history">View History</button>
                    <button class="btn btn-secondary" data-page="templates">Templates</button>
                    <button class="btn btn-secondary" data-page="routines">Routines</button>
                </div>
            </div>
        </div>

        <!-- Log Workout Page -->
        <div id="log-page" class="page">
            <div class="container">
                <h2>Log Workout</h2>
                <div class="workout-form-container">
                    <div class="workout-form-header">
                        <div class="control-group">
                            <label>Workout Name/Type:</label>
                            <input type="text" id="workout-name" placeholder="e.g., Upper Body, Leg Day, etc.">
                        </div>
                        <div class="control-group">
                            <label>Date:</label>
                            <input type="date" id="workout-date" value="">
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>Notes (Optional):</label>
                        <textarea id="workout-notes" rows="3" placeholder="Add any notes about this workout, how you felt, etc."></textarea>
                    </div>
                    
                    <div class="template-load-section" style="margin-bottom: 1rem; padding: 1rem; background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-color);">
                        <label style="display: block; margin-bottom: 0.5rem; color: var(--text-secondary);">Load from Template (Optional):</label>
                        <select id="load-template-select" style="width: 100%; padding: 0.75rem; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                            <option value="">Select a template...</option>
                        </select>
                        <button id="load-template-btn" class="btn btn-secondary" style="margin-top: 0.5rem; width: 100%;">Load Template</button>
                    </div>
                    
                    <div id="exercises-list" class="exercises-list">
                        <!-- Exercises will be added here dynamically -->
                    </div>
                    
                    <button id="add-exercise-btn" class="btn btn-secondary">+ Add Exercise</button>
                    
                    <div class="workout-form-actions">
                        <button id="cancel-edit-btn" class="btn btn-secondary hidden">Cancel Edit</button>
                        <div style="flex: 1;"></div>
                        <button id="save-workout-btn" class="btn btn-primary">Save Workout</button>
                        <button id="clear-workout-btn" class="btn btn-secondary">Clear</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- WOD Generator Page -->
        <div id="wod-page" class="page">
            <div class="container">
                <h2>CrossFit WOD Generator</h2>
                <div class="wod-controls">
                    <div class="control-group">
                        <label>Equipment:</label>
                        <select id="equipment-select">
                            <option value="none">No Equipment</option>
                            <option value="barbell">Barbell</option>
                            <option value="dumbbell">Dumbbell</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Difficulty:</label>
                        <select id="difficulty-select">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    <button id="generate-wod-btn" class="btn btn-primary">Generate WOD</button>
                </div>
                <div id="wod-result" class="wod-result hidden">
                    <h3>Your Workout of the Day</h3>
                    <div id="wod-content"></div>
                    <button id="save-wod-btn" class="btn btn-secondary">Save Workout</button>
                </div>
            </div>
        </div>

        <!-- Progress Page -->
        <div id="progress-page" class="page">
            <div class="container">
                <h2>Progress Charts</h2>
                <div class="chart-controls">
                    <label>Exercise:</label>
                    <select id="exercise-select">
                        <option value="all">All Exercises</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="progress-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Templates Page -->
        <div id="templates-page" class="page">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>Exercise Templates</h2>
                    <button id="create-template-btn" class="btn btn-primary">+ Create Template</button>
                </div>
                <div id="templates-list" class="templates-list"></div>
            </div>
        </div>

        <!-- Routines Page -->
        <div id="routines-page" class="page">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>Workout Routines</h2>
                    <button id="create-routine-btn" class="btn btn-primary">+ Create Routine</button>
                </div>
                <div id="routines-list" class="routines-list"></div>
            </div>
        </div>

        <!-- History Page -->
        <div id="history-page" class="page">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2>Workout History</h2>
                    <button id="export-data-btn" class="btn btn-secondary">Export Data</button>
                </div>
                <div class="history-controls">
                    <input type="text" id="history-search" placeholder="Search workouts, exercises, notes...">
                    <select id="history-sort">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                    </select>
                </div>
                <div class="history-filters">
                    <div class="filter-group">
                        <label>Date Range:</label>
                        <input type="date" id="filter-date-from" placeholder="From">
                        <input type="date" id="filter-date-to" placeholder="To">
                    </div>
                    <div class="filter-group">
                        <label>Exercise:</label>
                        <select id="filter-exercise">
                            <option value="">All Exercises</option>
                        </select>
                    </div>
                    <button id="clear-filters-btn" class="btn btn-secondary">Clear Filters</button>
                </div>
                <div id="history-list" class="history-list"></div>
            </div>
        </div>
    </div>

    <script type="module" src="/main.js"></script>
    
    <!-- Toast Notification Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Template Modal -->
    <div id="template-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close-template">&times;</span>
            <h2 id="template-modal-title">Create Template</h2>
            <div class="template-form">
                <div class="control-group">
                    <label>Template Name:</label>
                    <input type="text" id="template-name-input" placeholder="e.g., Push Day, Leg Day, etc.">
                </div>
                <div id="template-exercises-list" class="exercises-list"></div>
                <button id="add-template-exercise-btn" class="btn btn-secondary">+ Add Exercise</button>
                <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
                    <button id="cancel-template-btn" class="btn btn-secondary">Cancel</button>
                    <button id="save-template-btn" class="btn btn-primary">Save Template</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Routine Modal -->
    <div id="routine-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close-routine">&times;</span>
            <h2 id="routine-modal-title">Create Routine</h2>
            <div class="routine-form">
                <div class="control-group">
                    <label>Routine Name:</label>
                    <input type="text" id="routine-name-input" placeholder="e.g., 5-Day Split, Full Body 3x/Week">
                </div>
                <div class="control-group">
                    <label>Description (Optional):</label>
                    <textarea id="routine-description-input" rows="2" placeholder="Describe this routine..."></textarea>
                </div>
                <div id="routine-schedule">
                    <h3 style="margin-bottom: 1rem; color: var(--text-primary);">Weekly Schedule</h3>
                    <div id="routine-days-list"></div>
                    <button id="add-routine-day-btn" class="btn btn-secondary" style="margin-top: 1rem;">+ Add Day</button>
                </div>
                <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
                    <button id="cancel-routine-btn" class="btn btn-secondary">Cancel</button>
                    <button id="save-routine-btn" class="btn btn-primary">Save Routine</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text">Loading...</p>
    </div>
</body>
</html>
